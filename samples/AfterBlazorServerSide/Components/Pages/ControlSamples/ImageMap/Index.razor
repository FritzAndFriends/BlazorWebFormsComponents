@page "/ControlSamples/ImageMap"
@using BlazorWebFormsComponents
@using BlazorWebFormsComponents.Enums

<PageTitle>ImageMap Sample</PageTitle>

<h2>ImageMap Component Samples</h2>

<p>The ImageMap control displays an image with clickable hot spot regions, emulating
   <code>&lt;asp:ImageMap&gt;</code> from ASP.NET Web Forms. Hot spots can navigate to URLs
   or raise postback events, just like in Web Forms.</p>

<hr />

<!-- Navigation mode: clicking a hot spot navigates to a URL -->
<h3>Navigation Hot Spots</h3>
<p>Click a region to navigate. This mirrors the Web Forms <code>HotSpotMode.Navigate</code> behavior:</p>

<div class="demo-section">
    <ImageMap ImageUrl="/img/placeholder-400x200.svg"
              AlternateText="Navigation demo image"
              HotSpotMode="HotSpotMode.Navigate"
              HotSpots="@navigationHotSpots" />
</div>

<p>The image above has three hot spots defined:</p>
<ul>
    <li><strong>Left rectangle</strong> (0,0 → 130,200) — navigates to the Button sample</li>
    <li><strong>Center circle</strong> (200,100 radius 60) — navigates to the CheckBox sample</li>
    <li><strong>Right rectangle</strong> (270,0 → 400,200) — navigates to the Image sample</li>
</ul>

<p>Code:</p>
<pre><code>&lt;ImageMap ImageUrl="image.png"
          AlternateText="Navigation demo"
          HotSpotMode="HotSpotMode.Navigate"
          HotSpots="@@navigationHotSpots" /&gt;

@@code {
    List&lt;HotSpot&gt; navigationHotSpots = new()
    {
        new RectangleHotSpot {
            Left = 0, Top = 0, Right = 130, Bottom = 200,
            NavigateUrl = "/ControlSamples/Button",
            AlternateText = "Button Samples"
        },
        new CircleHotSpot {
            X = 200, Y = 100, Radius = 60,
            NavigateUrl = "/ControlSamples/CheckBox",
            AlternateText = "CheckBox Samples"
        }
    };
}</code></pre>

<hr />

<!-- PostBack mode: clicking a hot spot raises an event on the server -->
<h3>PostBack Hot Spots</h3>
<p>Click a region to trigger a server-side event with a <code>PostBackValue</code>.
   This is equivalent to handling <code>ImageMap.Click</code> in Web Forms code-behind:</p>

<div class="demo-section">
    <ImageMap ImageUrl="/img/placeholder-400x200.svg"
              AlternateText="PostBack demo image"
              HotSpotMode="HotSpotMode.PostBack"
              HotSpots="@postBackHotSpots"
              OnClick="HandleHotSpotClick" />

    @if (!string.IsNullOrEmpty(clickedRegion))
    {
        <div class="alert alert-success mt-2">
            You clicked: <strong>@clickedRegion</strong>
        </div>
    }
</div>

<p>Code:</p>
<pre><code>&lt;ImageMap HotSpotMode="HotSpotMode.PostBack"
          HotSpots="@@postBackHotSpots"
          OnClick="HandleHotSpotClick" /&gt;

@@code {
    void HandleHotSpotClick(ImageMapEventArgs e)
    {
        clickedRegion = e.PostBackValue;
    }
}</code></pre>

<hr />

<!-- Mixed mode: different hot spots with different behaviors -->
<h3>Mixed Hot Spot Modes</h3>
<p>Each hot spot can override the default <code>HotSpotMode</code>. This image has a
   navigate region, a postback region, and an inactive region:</p>

<div class="demo-section">
    <ImageMap ImageUrl="/img/placeholder-450x180.svg"
              AlternateText="Mixed mode demo image"
              HotSpotMode="HotSpotMode.Inactive"
              HotSpots="@mixedHotSpots"
              OnClick="HandleMixedClick" />

    @if (!string.IsNullOrEmpty(mixedClickResult))
    {
        <div class="alert alert-warning mt-2">@mixedClickResult</div>
    }
</div>

<p>Hot spot behaviors on this image:</p>
<ul>
    <li><strong>Left third</strong> — Navigate to home page</li>
    <li><strong>Center</strong> — PostBack (raises click event with value "center")</li>
    <li><strong>Right third</strong> — Inactive (no action)</li>
</ul>

<p>Code:</p>
<pre><code>new RectangleHotSpot {
    Left = 0, Top = 0, Right = 150, Bottom = 180,
    HotSpotMode = HotSpotMode.Navigate,
    NavigateUrl = "/",
    AlternateText = "Home"
},
new CircleHotSpot {
    X = 225, Y = 90, Radius = 50,
    HotSpotMode = HotSpotMode.PostBack,
    PostBackValue = "center",
    AlternateText = "Click Me"
},
new RectangleHotSpot {
    Left = 300, Top = 0, Right = 450, Bottom = 180,
    HotSpotMode = HotSpotMode.Inactive,
    AlternateText = "Inactive Region"
}</code></pre>

<hr />

<!-- Polygon hot spot example -->
<h3>Polygon Hot Spot</h3>
<p>Use <code>PolygonHotSpot</code> for irregularly shaped regions, defined by coordinate pairs:</p>

<div class="demo-section">
    <ImageMap ImageUrl="/img/placeholder-300x200.svg"
              AlternateText="Polygon demo image"
              HotSpotMode="HotSpotMode.PostBack"
              HotSpots="@polygonHotSpots"
              OnClick="HandlePolygonClick" />

    @if (!string.IsNullOrEmpty(polygonClickResult))
    {
        <div class="alert alert-info mt-2">@polygonClickResult</div>
    }
</div>

<p>Code:</p>
<pre><code>new PolygonHotSpot {
    Coordinates = "150,20,280,180,20,180",
    PostBackValue = "triangle",
    AlternateText = "Triangle region"
}</code></pre>

<hr />

<!-- Accessibility -->
<h3>Accessibility</h3>
<p>Always provide <code>AlternateText</code> on both the ImageMap and each HotSpot for screen readers.
   Use <code>GenerateEmptyAlternateText</code> for purely decorative images:</p>

<div class="demo-section">
    <ImageMap ImageUrl="/img/placeholder-200x60.svg"
              GenerateEmptyAlternateText="true"
              HotSpots="@emptyHotSpots" />
    <p class="text-muted">Decorative image with empty alt text.</p>
</div>

<p>Code:</p>
<pre><code>&lt;ImageMap GenerateEmptyAlternateText="true" ... /&gt;</code></pre>

@code {
    private string clickedRegion;
    private string mixedClickResult;
    private string polygonClickResult;

    // Navigation mode hot spots
    private List<HotSpot> navigationHotSpots = new()
    {
        new RectangleHotSpot
        {
            Left = 0, Top = 0, Right = 130, Bottom = 200,
            NavigateUrl = "/ControlSamples/Button",
            AlternateText = "Go to Button samples"
        },
        new CircleHotSpot
        {
            X = 200, Y = 100, Radius = 60,
            NavigateUrl = "/ControlSamples/CheckBox",
            AlternateText = "Go to CheckBox samples"
        },
        new RectangleHotSpot
        {
            Left = 270, Top = 0, Right = 400, Bottom = 200,
            NavigateUrl = "/ControlSamples/Image",
            AlternateText = "Go to Image samples"
        }
    };

    // PostBack mode hot spots
    private List<HotSpot> postBackHotSpots = new()
    {
        new RectangleHotSpot
        {
            Left = 0, Top = 0, Right = 200, Bottom = 200,
            PostBackValue = "Left Region",
            AlternateText = "Left region"
        },
        new RectangleHotSpot
        {
            Left = 200, Top = 0, Right = 400, Bottom = 200,
            PostBackValue = "Right Region",
            AlternateText = "Right region"
        }
    };

    // Mixed mode hot spots — each overrides the default Inactive mode
    private List<HotSpot> mixedHotSpots = new()
    {
        new RectangleHotSpot
        {
            Left = 0, Top = 0, Right = 150, Bottom = 180,
            HotSpotMode = HotSpotMode.Navigate,
            NavigateUrl = "/",
            AlternateText = "Navigate to Home"
        },
        new CircleHotSpot
        {
            X = 225, Y = 90, Radius = 50,
            HotSpotMode = HotSpotMode.PostBack,
            PostBackValue = "center",
            AlternateText = "Click Me"
        },
        new RectangleHotSpot
        {
            Left = 300, Top = 0, Right = 450, Bottom = 180,
            HotSpotMode = HotSpotMode.Inactive,
            AlternateText = "Inactive Region"
        }
    };

    // Polygon hot spot
    private List<HotSpot> polygonHotSpots = new()
    {
        new PolygonHotSpot
        {
            Coordinates = "150,20,280,180,20,180",
            PostBackValue = "triangle",
            AlternateText = "Triangle region"
        }
    };

    // Decorative image — no meaningful hot spots
    private List<HotSpot> emptyHotSpots = new();

    private void HandleHotSpotClick(ImageMapEventArgs e)
    {
        clickedRegion = e.PostBackValue;
    }

    private void HandleMixedClick(ImageMapEventArgs e)
    {
        mixedClickResult = $"PostBack received: {e.PostBackValue}";
    }

    private void HandlePolygonClick(ImageMapEventArgs e)
    {
        polygonClickResult = $"Polygon clicked: {e.PostBackValue}";
    }
}
