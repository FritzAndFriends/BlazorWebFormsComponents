@page "/ControlSamples/DropDownList"

<h1>DropDownList Component Samples</h1>

<h2>Basic DropDownList with Static Items</h2>
<div data-audit-control="DropDownList-1">
    <DropDownList TItem="object" StaticItems="staticItems" @bind-SelectedValue="selectedStatic" />
</div>
<p>Selected Value: <strong>@selectedStatic</strong></p>

<h2>With Pre-selected Value</h2>
<div data-audit-control="DropDownList-2">
    <DropDownList TItem="object" StaticItems="preselectedItems" SelectedValue="banana" />
</div>

<h2>Data-bound DropDownList</h2>
<div data-audit-control="DropDownList-3">
    <DropDownList TItem="Product"
              Items="products"
              DataTextField="Name"
              DataValueField="Id"
              @bind-SelectedValue="selectedProduct" />
</div>
<p>Selected Product ID: <strong>@selectedProduct</strong></p>
<p>Selected Product: <strong>@(products.FirstOrDefault(p => p.Id == selectedProduct)?.Name ?? "None")</strong></p>

<h2>Data-bound with DataTextFormatString (Currency)</h2>
<div data-audit-control="DropDownList-4">
    <DropDownList TItem="PricedProduct"
              Items="pricedProducts"
              DataTextField="Price"
              DataValueField="Id"
              DataTextFormatString="{0:C}"
              @bind-SelectedValue="selectedPricedProduct" />
</div>
<p>Selected: <strong>@selectedPricedProduct</strong></p>
<small>The <code>DataTextFormatString="{0:C}"</code> formats each item's text as currency.</small>

<h2>Data-bound with DataTextFormatString (Prefix)</h2>
<div data-audit-control="DropDownList-5">
    <DropDownList TItem="Product"
              Items="products"
              DataTextField="Name"
              DataValueField="Id"
              DataTextFormatString="Item: {0}"
              @bind-SelectedValue="selectedFormattedProduct" />
</div>
<p>Selected: <strong>@selectedFormattedProduct</strong></p>
<small>The <code>DataTextFormatString="Item: {0}"</code> adds a prefix to each item's display text.</small>

<h2>Disabled DropDownList</h2>
<div data-audit-control="DropDownList-6">
    <DropDownList TItem="object" StaticItems="staticItems" Enabled="false" SelectedValue="2" />
</div>

<h2>With CSS Class</h2>
<DropDownList TItem="object" StaticItems="styledItems" CssClass="form-select" />
<br />
<small>Note: The form-select class is from Bootstrap and provides styling.</small>

<h2>With Inline Styles</h2>
<DropDownList TItem="object"
              StaticItems="colorItems"
              BackColor="new WebColor(System.Drawing.Color.LightYellow)"
              ForeColor="new WebColor(System.Drawing.Color.Navy)"
              Font="new FontInfo { Bold = true }" />

<h2>With Change Event</h2>
<DropDownList TItem="object"
              StaticItems="eventItems"
              @bind-SelectedValue="eventSelection"
              OnSelectedIndexChanged="HandleSelectionChanged" />
<p>Last selection: <strong>@lastSelection</strong> at @lastChangeTime.ToString("HH:mm:ss")</p>

@code {
    private string selectedStatic = "";
    private string selectedProduct = "";
    private string selectedPricedProduct = "";
    private string selectedFormattedProduct = "";
    private string eventSelection = "";
    private string lastSelection = "None";
    private DateTime lastChangeTime = DateTime.Now;

    private ListItemCollection staticItems = new()
    {
        new ListItem("Select...", ""),
        new ListItem("Option One", "1"),
        new ListItem("Option Two", "2"),
        new ListItem("Option Three", "3")
    };

    private ListItemCollection preselectedItems = new()
    {
        new ListItem("Apple", "apple"),
        new ListItem("Banana", "banana"),
        new ListItem("Cherry", "cherry")
    };

    private ListItemCollection styledItems = new()
    {
        new ListItem("Styled Option", "1"),
        new ListItem("Another Option", "2")
    };

    private ListItemCollection colorItems = new()
    {
        new ListItem("Colored dropdown item", "1"),
        new ListItem("Another colored item", "2")
    };

    private ListItemCollection eventItems = new()
    {
        new ListItem("Select one...", ""),
        new ListItem("First", "1"),
        new ListItem("Second", "2"),
        new ListItem("Third", "3")
    };

    private List<Product> products = new()
    {
        new Product { Id = "1", Name = "Widget" },
        new Product { Id = "2", Name = "Gadget" },
        new Product { Id = "3", Name = "Gizmo" },
        new Product { Id = "4", Name = "Doohickey" }
    };

    private List<PricedProduct> pricedProducts = new()
    {
        new PricedProduct { Id = "1", Price = 9.99m },
        new PricedProduct { Id = "2", Price = 24.50m },
        new PricedProduct { Id = "3", Price = 149.95m },
        new PricedProduct { Id = "4", Price = 3.00m }
    };

    private void HandleSelectionChanged(ChangeEventArgs e)
    {
        lastSelection = e.Value?.ToString() ?? "None";
        lastChangeTime = DateTime.Now;
        StateHasChanged();
    }

    public class Product
    {
        public string Id { get; set; }
        public string Name { get; set; }
    }

    public class PricedProduct
    {
        public string Id { get; set; }
        public decimal Price { get; set; }
    }
}

<hr />

<p>Code:</p>
<code>
&lt;DropDownList TItem="object" StaticItems="staticItems" @@bind-SelectedValue="selectedValue" /&gt;<br />
&lt;DropDownList TItem="Product" Items="products" DataTextField="Name" DataValueField="Id" @@bind-SelectedValue="selectedProduct" /&gt;<br />
&lt;DropDownList TItem="PricedProduct" Items="pricedProducts" DataTextField="Price" DataValueField="Id" DataTextFormatString="{0:C}" /&gt;<br />
&lt;DropDownList TItem="Product" Items="products" DataTextField="Name" DataValueField="Id" DataTextFormatString="Item: {0}" /&gt;<br />
&lt;DropDownList TItem="object" StaticItems="staticItems" Enabled="false" SelectedValue="2" /&gt;
</code>
