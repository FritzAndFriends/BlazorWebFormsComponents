@page "/UtilityFeatures/PageService"
@inject IPageService Page

<BlazorWebFormsComponents.Page />

<h2>PageService - Web Forms Page Object Compatibility</h2>

<p>The <code>PageService</code> provides page-level services that mimic ASP.NET Web Forms <code>Page</code> object functionality, enabling programmatic access to page properties like <code>Title</code>, <code>MetaDescription</code>, and <code>MetaKeywords</code>.</p>

<div class="demo-section">
    <h3>Current Page Properties</h3>
    <p><strong>Title:</strong> @Page.Title</p>
    <p><strong>Meta Description:</strong> @(string.IsNullOrEmpty(Page.MetaDescription) ? "(not set)" : Page.MetaDescription)</p>
    <p><strong>Meta Keywords:</strong> @(string.IsNullOrEmpty(Page.MetaKeywords) ? "(not set)" : Page.MetaKeywords)</p>
    
    <div class="mb-3">
        <label class="form-label">Set New Page Title:</label>
        <input type="text" class="form-control" style="max-width: 400px;" @bind="NewTitle" placeholder="Enter page title..." />
    </div>
    
    <div class="mb-3">
        <label class="form-label">Set Meta Description:</label>
        <textarea class="form-control" style="max-width: 400px;" rows="2" @bind="NewMetaDescription" placeholder="Enter meta description..."></textarea>
    </div>
    
    <div class="mb-3">
        <label class="form-label">Set Meta Keywords:</label>
        <input type="text" class="form-control" style="max-width: 400px;" @bind="NewMetaKeywords" placeholder="Enter keywords (comma-separated)..." />
    </div>
    
    <Button Text="Update Page Properties" OnClick="UpdatePageProperties" CssClass="btn btn-primary" />
    
    @if (!string.IsNullOrEmpty(Message))
    {
        <div class="alert alert-success mt-3">@Message</div>
    }
</div>

<hr />

<h3>Web Forms Comparison</h3>

<div class="row">
    <div class="col-md-6">
        <h4>ASP.NET Web Forms</h4>
        <pre><code class="language-csharp">// In code-behind (.aspx.cs)
protected void Page_Load(object sender, EventArgs e)
{
    Page.Title = "My Dynamic Title";
    Page.MetaDescription = "Page description for SEO";
    Page.MetaKeywords = "blazor, webforms, migration";
}

protected void UpdateButton_Click(object sender, EventArgs e)
{
    Page.Title = txtNewTitle.Text;
    Page.MetaDescription = txtDescription.Text;
    Page.MetaKeywords = txtKeywords.Text;
}</code></pre>
    </div>
    <div class="col-md-6">
        <h4>Blazor with PageService</h4>
        <pre><code class="language-razor">@@page "/MyPage"
@@inject IPageService Page

&lt;BlazorWebFormsComponents.Page /&gt;

@@code {
    protected override void OnInitialized()
    {
        Page.Title = "My Dynamic Title";
        Page.MetaDescription = "Page description for SEO";
        Page.MetaKeywords = "blazor, webforms, migration";
    }

    private void UpdatePageProperties()
    {
        Page.Title = NewTitle;
        Page.MetaDescription = NewMetaDescription;
        Page.MetaKeywords = NewMetaKeywords;
    }
}</code></pre>
    </div>
</div>

<hr />

<h3>Key Features</h3>
<ul>
    <li><strong>Programmatic Title Setting:</strong> Set page title dynamically via code, just like <code>Page.Title</code> in Web Forms</li>
    <li><strong>Meta Tags Support:</strong> Set meta description and keywords for SEO, equivalent to <code>Page.MetaDescription</code> and <code>Page.MetaKeywords</code></li>
    <li><strong>Dependency Injection:</strong> Available through DI as <code>IPageService</code></li>
    <li><strong>Event-Based Updates:</strong> The <code>Page</code> component automatically updates page metadata when properties change</li>
    <li><strong>Scoped Service:</strong> One instance per request/render cycle, just like Web Forms <code>Page</code> object</li>
</ul>

<h3>Usage Instructions</h3>

<h4>1. Register the Service (Already done in this sample)</h4>
<pre><code class="language-csharp">// In Program.cs
builder.Services.AddBlazorWebFormsComponents();</code></pre>

<h4>2. Add the Page Component to Your Layout or Page</h4>
<pre><code class="language-razor">@@inject IPageService Page

&lt;BlazorWebFormsComponents.Page /&gt;  @* This renders the dynamic PageTitle and meta tags *@</code></pre>

<h4>3. Set Page Properties Programmatically</h4>
<pre><code class="language-csharp">@@code {
    protected override void OnInitialized()
    {
        Page.Title = "My Page Title";
        Page.MetaDescription = "Description for search engines";
        Page.MetaKeywords = "keyword1, keyword2, keyword3";
    }

    private void SomeEventHandler()
    {
        Page.Title = "Updated Title";
        Page.MetaDescription = "Updated description";
    }
}</code></pre>

<h3>SEO Benefits</h3>
<p>The <code>MetaDescription</code> and <code>MetaKeywords</code> properties help improve your site's search engine optimization:</p>
<ul>
    <li><strong>Meta Description:</strong> Appears in search results and social media previews (recommended 150-160 characters)</li>
    <li><strong>Meta Keywords:</strong> Helps categorize page content (use relevant, comma-separated keywords)</li>
    <li><strong>Dynamic Updates:</strong> Set metadata based on page content, user context, or database values</li>
</ul>

@code {
    private string NewTitle = "";
    private string NewMetaDescription = "";
    private string NewMetaKeywords = "";
    private string Message = "";

    protected override void OnInitialized()
    {
        // Set initial page properties
        Page.Title = "PageService Sample - BlazorWebFormsComponents";
        Page.MetaDescription = "Demonstrates the PageService utility for setting page title and meta tags programmatically in Blazor, similar to ASP.NET Web Forms Page object.";
        Page.MetaKeywords = "blazor, webforms, page service, meta tags, seo, migration";
    }

    private void UpdatePageProperties()
    {
        if (!string.IsNullOrWhiteSpace(NewTitle))
        {
            Page.Title = NewTitle;
            Page.MetaDescription = NewMetaDescription;
            Page.MetaKeywords = NewMetaKeywords;
            Message = $"Page properties updated!";
            NewTitle = "";
            NewMetaDescription = "";
            NewMetaKeywords = "";
        }
        else
        {
            Message = "Please enter at least a title";
        }
    }
}
