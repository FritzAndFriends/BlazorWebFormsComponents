@inherits BaseModelBindingComponent<ItemType>
@typeparam ItemType

@if (!Visible)
{
	<!-- Control is not visible -->
}
else if (Items == null || !Items.Any())
{
	@EmptyDataTemplate
}
else
{

	@if (LayoutTemplate is null)
	{
		LayoutTemplate = context => builder => builder.AddContent(1, context);
	}

	@LayoutTemplate(
			@: @if (Items != null)
					{

						OnDataBinding.InvokeAsync(EventArgs.Empty);

						foreach (var item in ItemsList)
						{

							<CascadingValue Name="CurrentDataBoundItem" Value="item">
							@if (AlternatingItemTemplate == null || ItemsList.FindIndex(i => i.Equals(item)) % 2 == 0) // || rowCounter % 2 == 0)
							{
								@ItemTemplate(item)
							}
							else
							{
								@AlternatingItemTemplate(item)
							}
							</CascadingValue>
					/**/
					/**/

							if (ItemSeparatorTemplate != null)
							{
								@ItemSeparatorTemplate
							}
					/**/
					/**/
					/**/

							OnItemDataBound.InvokeAsync(new ListViewItemEventArgs(item));

						}

						OnDataBound.InvokeAsync(EventArgs.Empty);
					}
			)
}
