@inherits BunitContext

@code {

	[Fact]
	public void TreeView_StaticNodes_RendersAllNodesWithCorrectLinks()
	{
		// Arrange/Act
		var cut = Render(
			@<TreeView id="SampleTreeView"
								runat="server">

				<Nodes>

					<TreeNode Value="Home"
										NavigateUrl="Home.aspx"
										Text="Home"
										Target="Content"
										ToolTip="Home Tooltip"
										Expanded="true">

						<TreeNode Value="Page 1"
											NavigateUrl="Page1.aspx"
											Text="Page1"
											Target="Content">

							<TreeNode Value="Section 1"
												NavigateUrl="Section1.aspx"
												Text="Section 1"
												Target="Content" />

						</TreeNode>

						<TreeNode Value="Page 2"
											NavigateUrl="Page2.aspx"
											Text="Page 2"
											Target="Content">

						</TreeNode>

					</TreeNode>

				</Nodes>

			</TreeView>
		);

		// Asserts
		cut.FindAll("table").Count().ShouldBe(4);
		cut.FindComponent<TreeView>().Instance.Nodes.Count.ShouldBe(4);

		var anchors = cut.FindAll("a").Where(c => c.HasAttribute("href") && !c.GetElementsByTagName("img").Any()).ToList();
		anchors.Count().ShouldBe(4);

		anchors[0].ShouldLinkTo("Home.aspx");
		anchors[1].ShouldLinkTo("Page1.aspx");
		anchors[2].ShouldLinkTo("Section1.aspx");
		anchors[3].ShouldLinkTo("Page2.aspx");

		anchors.First().GetAttribute("title").ShouldBe("Home Tooltip");
	}

}
