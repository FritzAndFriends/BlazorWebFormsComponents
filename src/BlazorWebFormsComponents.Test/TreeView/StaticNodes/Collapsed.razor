@inherits BunitContext

@code {

	private TreeNode _ExpandedNode;

	[Fact]
	public void TreeView_Collapsed_ClickToExpandShowsCollapseImage()
	{
		var cut = Render(
			@<TreeView id="SampleTreeView" runat="server">
				<Nodes>
					<TreeNode Value="Parent"
										Text="Parent"
										Expanded="false">
						<TreeNode Value="Child"
											Text="Child" />
					</TreeNode>
				</Nodes>
			</TreeView>
		);

		var beforeImage = @<img src="_content/Fritz.BlazorWebFormsComponents/TreeView/Default_Expand.gif" alt="Expand Parent" title="Expand Parent" style="border-width: 0;">;
		var afterImage = @<img src="_content/Fritz.BlazorWebFormsComponents/TreeView/Default_Collapse.gif" alt="Collapse Parent" title="Collapse Parent" style="border-width: 0;">;

		cut.Find("img").MarkupMatches(beforeImage);

		cut.Find("a").Click();

		cut.Find("img").MarkupMatches(afterImage);
	}

	[Fact]
	public void TreeView_Expanded_ClickToCollapseHidesChildren()
	{
		var cut = Render(
			@<TreeView id="SampleTreeView" runat="server">
				<Nodes>
					<TreeNode Value="Parent"
										Text="Parent"
										Expanded="true">
						<TreeNode Value="Child"
											Text="Child" />
					</TreeNode>
				</Nodes>
			</TreeView>
		);

		var beforeImage = @<img src="_content/Fritz.BlazorWebFormsComponents/TreeView/Default_Expand.gif" alt="Expand Parent" title="Expand Parent" style="border-width: 0;">;
		var afterImage = @<img src="_content/Fritz.BlazorWebFormsComponents/TreeView/Default_Collapse.gif" alt="Collapse Parent" title="Collapse Parent" style="border-width: 0;">;

		cut.Find("img").MarkupMatches(afterImage);

		cut.Find("a").Click();

		cut.Find("img").MarkupMatches(beforeImage);
		cut.FindAll("table").Count.ShouldBe(1);
	}
}
