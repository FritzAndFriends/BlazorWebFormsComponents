@inherits BunitContext

@code {

	public TreeView BookTreeView;

	System.Xml.XmlDocument bookXml = new System.Xml.XmlDocument();

	[Fact]
	public void TreeView_XmlDataSource_RendersAllNodesFromXmlDocument()
	{
		bookXml.LoadXml(@"<Book Title=""Book Title"">
											<Chapter Heading=""Chapter 1"">
												<Section Heading=""Section 1"">
												</Section>
												<Section Heading=""Section 2"">
												</Section>
											</Chapter>
											<Chapter Heading=""Chapter 2"">
												<Section Heading=""Section 1"">
												</Section>
											</Chapter>
											</Book>");

		var cut = Render(
			@<TreeView @ref="BookTreeView"
								DataSource="bookXml"
								runat="server">

				<DataBindings>
					<TreeNodeBinding DataMember="Book" TextField="Title" />
					<TreeNodeBinding DataMember="Chapter" TextField="Heading" />
					<TreeNodeBinding DataMember="Section" TextField="Heading" />
				</DataBindings>

			</TreeView>
		);

		cut.FindAll("table").Count().ShouldBe(6, "Did not render all 6 nodes of the XML document");
	}

}
