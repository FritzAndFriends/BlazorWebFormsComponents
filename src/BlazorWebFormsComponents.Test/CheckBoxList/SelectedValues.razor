
@code {

	[Fact]
	public void CheckBoxList_SelectedValues_PreSelectsItems()
	{
		// Arrange
		var items = new ListItemCollection
		{
			new ListItem("Option 1", "1"),
			new ListItem("Option 2", "2"),
			new ListItem("Option 3", "3")
		};
		var selectedValues = new List<string> { "1", "3" };

		// Act
		var cut = Render(@<CheckBoxList TItem="object" StaticItems="items" SelectedValues="selectedValues" />);

		// Assert
		var checkboxes = cut.FindAll("input[type='checkbox']");
		checkboxes[0].HasAttribute("checked").ShouldBeTrue();
		checkboxes[1].HasAttribute("checked").ShouldBeFalse();
		checkboxes[2].HasAttribute("checked").ShouldBeTrue();
	}

	[Fact]
	public async Task CheckBoxList_CheckItem_UpdatesSelectedValues()
	{
		// Arrange
		var items = new ListItemCollection
		{
			new ListItem("Option 1", "1"),
			new ListItem("Option 2", "2")
		};
		var selectedValues = new List<string>();
		var cut = Render(@<CheckBoxList TItem="object" StaticItems="items" @bind-SelectedValues="selectedValues" />);

		// Act
		var checkbox = cut.FindAll("input[type='checkbox']")[0];
		await checkbox.ChangeAsync(new ChangeEventArgs { Value = true });

		// Assert
		selectedValues.ShouldContain("1");
	}

	[Fact]
	public async Task CheckBoxList_UncheckItem_RemovesFromSelectedValues()
	{
		// Arrange
		var items = new ListItemCollection
		{
			new ListItem("Option 1", "1"),
			new ListItem("Option 2", "2")
		};
		var selectedValues = new List<string> { "1", "2" };
		var cut = Render(@<CheckBoxList TItem="object" StaticItems="items" @bind-SelectedValues="selectedValues" />);

		// Act
		var checkbox = cut.FindAll("input[type='checkbox']")[0];
		await checkbox.ChangeAsync(new ChangeEventArgs { Value = false });

		// Assert
		selectedValues.ShouldNotContain("1");
		selectedValues.ShouldContain("2");
	}

	[Fact]
	public async Task CheckBoxList_OnSelectedIndexChanged_FiresOnChange()
	{
		// Arrange
		var items = new ListItemCollection
		{
			new ListItem("Option 1", "1")
		};
		var eventFired = false;
		var cut = Render(@<CheckBoxList TItem="object" StaticItems="items" OnSelectedIndexChanged="e => eventFired = true" />);

		// Act
		var checkbox = cut.Find("input[type='checkbox']");
		await checkbox.ChangeAsync(new ChangeEventArgs { Value = true });

		// Assert
		eventFired.ShouldBeTrue();
	}

}
