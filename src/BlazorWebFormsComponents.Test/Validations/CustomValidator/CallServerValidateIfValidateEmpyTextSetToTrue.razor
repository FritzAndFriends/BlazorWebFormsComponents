
@code {
	bool _validSubmit = false;
	bool _invalidSubmit = false;
	bool _serverValidate = false;
	ForwardRef<InputBase<string>> Name = new ForwardRef<InputBase<string>>();

	[Fact]
	public void CustomValidator_ValidateEmptyTextTrue_CallsServerValidate()
	{
		var cut = Render(
			@<EditForm Model="@exampleModel" OnValidSubmit="@HandleValidSubmit" OnInvalidSubmit="@HandleInvalidSubmit">
				Write something
				<InputText @ref="Name.Current" @bind-Value="exampleModel.Name" />
				<CustomValidator ServerValidate="@ServerValidate"
												 ValidateEmptyText="true"
												 ControlRef="@Name"
												 Text="can't see me!" />
			</EditForm>
		);

		cut.Find("input").Change("");

		cut.Find("form").Submit();

		_validSubmit.ShouldBeTrue();
		_invalidSubmit.ShouldBeFalse();
		_serverValidate.ShouldBeTrue();

		cut.Find("span").GetAttribute("style").ShouldContain("visibility:hidden");

	}

	private ExampleModel exampleModel = new ExampleModel();

	private bool ServerValidate(string value)
	{
		_serverValidate = true;

		return true;
	}

	private void HandleValidSubmit()
	{
		_validSubmit = true;
	}

	private void HandleInvalidSubmit()
	{
		_invalidSubmit = true;
	}

	public class ExampleModel
	{
		public string Name { get; set; }
	}
}
