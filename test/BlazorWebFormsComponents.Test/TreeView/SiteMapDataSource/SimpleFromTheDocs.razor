@inherits TestComponentBase

<Fixture Test="FirstTest" Setup="Setup">
	<ComponentUnderTest>

     <TreeView @ref="SiteTreeView" 
        DataSource="SiteMapSource"
        AutoGenerateDataBindings="False"
        runat="server">
        
        <DataBindings>
        
          <TreeNodeBinding TextField="title" NavigateUrlField="url"/>
        
        </DataBindings>
            
      </TreeView>

	</ComponentUnderTest>
</Fixture>

@code {

	public TreeView SiteTreeView;

	System.Xml.XmlDocument SiteMapSource = new System.Xml.XmlDocument();

	void Setup(Fixture fixture)
	{

		SiteMapSource.LoadXml(@"<siteMap>  
			<siteMapNode title=""Home"" description=""Home"" url=""default.aspx"">  
				<siteMapNode title=""Products"" description=""Products"" url=""Products.aspx"">  
					<siteMapNode title=""Computers"" url=""Computers.aspx""/>  
					<siteMapNode title=""Accessories"" url=""Accessories.aspx""/>       
				</siteMapNode>  
			</siteMapNode>  
		</siteMap>");

	}

	void FirstTest(Fixture fixture)
	{

		var cut = fixture.GetComponentUnderTest<TreeView>(); 
		cut.FindAll("table").Count().ShouldBe(4, "Did not render all 4 pages of the SiteMap");
		cut.FindAll("a").Count(a => !a.GetElementsByTagName("img").Any()).ShouldBe(4, "Did not create all 4 links of the SiteMap");
		

	}

}
